<div class="cover" style="page-break-after:always;font-family:方正公文仿宋;width:100%;height:100%;border:none;margin: 0 auto;text-align:center;">
    <div style="width:60%;margin: 0 auto;height:0;padding-bottom:20%;">
        </br>
        <img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/%E5%8D%97%E5%BC%80%E5%A4%A7%E5%AD%A6logo.jpeg" alt="校名" style="width:80%;"/>
    </div>
    </br></br></br></br></br>
    <div style="width:60%;margin: 0 auto;height:0;padding-bottom:30%;">
        <img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/%E5%8D%97%E5%BC%80%E5%A4%A7%E5%AD%A6%E6%A0%A1%E5%BE%BDlogo.jpg" alt="校徽" style="width:50%;"/>
	</div>
    </br></br></br></br></br></br></br></br>
    <span style="font-family:华文黑体Bold;text-align:center;font-size:20pt;margin: 10pt auto;line-height:30pt;">《图书管理及借阅系统》</span>
    <p style="text-align:center;font-size:14pt;margin: 0 auto">数据库大作业 </p>
    </br>
    </br>
    <table style="border:none;text-align:center;width:72%;font-family:仿宋;font-size:14px; margin: 0 auto;">
    <tbody style="font-family:方正公文仿宋;font-size:12pt;">
    	<tr style="font-weight:normal;"> 
    		<td style="width:20%;text-align:right;">题　　目</td>
    		<td style="width:2%">：</td> 
    		<td style="width:40%;font-weight:normal;border-bottom: 1px solid;text-align:center;font-family:华文仿宋"> 图书管理及借阅系统</td>     </tr>
    	<tr style="font-weight:normal;"> 
    		<td style="width:20%;text-align:right;">上课时间</td>
    		<td style="width:2%">：</td> 
    		<td style="width:40%;font-weight:normal;border-bottom: 1px solid;text-align:center;font-family:华文仿宋"> 周五早上</td>     </tr>
    	<tr style="font-weight:normal;"> 
    		<td style="width:20%;text-align:right;">授课教师</td>
    		<td style="width:2%">：</td> 
    		<td style="width:40%;font-weight:normal;border-bottom: 1px solid;text-align:center;font-family:华文仿宋">李旭东 </td>     </tr>
    	<tr style="font-weight:normal;"> 
    		<td style="width:20%;text-align:right;">姓　　名</td>
    		<td style="width:2%">：</td> 
    		<td style="width:40%;font-weight:normal;border-bottom: 1px solid;text-align:center;font-family:华文仿宋"> 张怡桢</td>     </tr>
    	<tr style="font-weight:normal;"> 
    		<td style="width:20%;text-align:right;">学　　号</td>
    		<td style="width:2%">：</td> 
    		<td style="width:40%;font-weight:normal;border-bottom: 1px solid;text-align:center;font-family:华文仿宋">2013747 </td>     </tr>
    	<tr style="font-weight:normal;"> 
    		<td style="width:20%;text-align:right;">年　　级</td>
    		<td style="width:%">：</td> 
    		<td style="width:40%;font-weight:normal;border-bottom: 1px solid;text-align:center;font-family:华文仿宋"> 2020级本科生</td>     </tr>
    	<tr style="font-weight:normal;"> 
    		<td style="width:20%;text-align:right;">日　　期</td>
    		<td style="width:2%">：</td> 
    		<td style="width:40%;font-weight:normal;border-bottom: 1px solid;text-align:center;font-family:华文仿宋">2022/6/24</td>     </tr>
    </tbody>              
    </table>
</div>

<!-- 注释语句：导出PDF时会在这里分页 -->

# 图书管理及借阅系统



<center><div style='height:2mm;'></div><div style="font-family:华文楷体;font-size:14pt;">张怡桢，2013747</div></center>
<center><span style="font-family:华文楷体;font-size:9pt;line-height:9mm">南开大学软件学院</span>
</center>
<div>
<div style="width:52px;float:left; font-family:方正公文黑体;">摘　要：</div> 
<div style="overflow:hidden; font-family:华文楷体;">  图书管理系统是一项集多类学科为一体的系统，其中包含管理、信息、计算机等学科，广泛的应用在当今图书管理学上，给读者与管理员提供了很大的便利。全面实现这一系统，能够极大限度的改进图书管理的水平，是一个利民惠民的工程，更是提高社会教育水平的一个重要的举措。<br />在对本课题进行全面深入研究和分析后，决定采用的数据库库管理系统为MySQL，使用的开发工具为IntelliJ IDEA，在对于数据管理以及储存以及一些简单的数据增删改除的业务当中，最重要的是SQL语言，在面向对象的开发工具中，最主要的是JAVA,在网络查询和开发语言方面都运用了JSP技术。本篇论文主要通过使用以上工具，来对图书管理系统进行更合理的开发和利用。<br />本篇论文在构建新系统的前提下，进行详细的背景分析，并介绍系统开发时需要满足的业务需求与技术难点。利用软件工程思想，在将功能性需求和非功能性需求区分的基础上进行需求分析；利用该需求分析系统的业务流转设计；然后针对上述内容，并根据关系数据库的范式理论进行分解优化，设计出系统的关系型数据库，并利用ER图来展示整个图书管理的各个对象之间的关系。在系统设计完成以后，对系统进行了相关的业务展示。<br />本系统主要有六个主要对象以及相关业务，分别是管理员模块、图书信息模块、借阅业务模块、读者信息管理模块、公告展示模块和图书分类模块，管理员与读者都可以通过此系统寻找出自己所需要的信息。
  </div>
</div>

<div>
<div style="width:52px;float:left; font-family:方正公文黑体;">关键词：</div> 
<div style="overflow:hidden; font-family:华文楷体;">数据库；java；web；范式理论；ER图；图书管理</div>
</div>






## 关系型数据库模型建立

根据图书管理以及借阅的业务需求设计关系型数据库的ER图并用sql语言实现业务。　　

### 基本模型描述

对于图书管理以及借阅系统的业务需求，我觉得需要管理员admin对图书book的与读者reader进行统一的管理，其中图书具有分类的需求，需要一个图书类型表type来对图书进行类型的区分，同时作为一个图书馆系统，读者信息与图书信息必不可缺，需要进行记录，同时读者对于书籍的借阅需要一张表格lend_list来进行记录，记录谁借了什么书什么时候还等信息，以及需要一张公告notice表格来由管理员进行公告的发布。

### 通用的 E-R 模型（E-R 图）

E-R 图能够很直观地表示出概念模型。E-R 图之间联系的种类主要有三种情况，分别为一对一(1:1)、一对多(1:N)和多对多(N:M)。

  ER图（实体-联系图）由以下几个固定图形所构成：　　

  实体形-矩形表示，矩形内为实体名称。　　

  属性-椭圆形或圆角矩形来表示，主属性的下面要相应的添加下划线。 　

  联系-菱形表示，菱形内部为联系的内容。

通过对图书管理系统的认真分析后，确定了以下六个实体，并标注了其各自的属性（一个实体可能有多个属性）：

#### admin 管理员

主要业务：管理读者借阅以及书籍的入库出库，发布公告等

管理员：（id，密码，用户名，管理员类型）

<img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220625151827483.png" alt="image-20220625151827483" style="zoom:33%;" />



#### book_info 图书信息

主要业务：图书具有被借出归还的业务

图书：（id，图书名称，作者，出版社，书籍编号，简介，语言，价格，出版时间，书籍类型，状态）

<img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220625151547962.png" alt="image-20220625151547962" style="zoom: 33%;" />

#### lend_list 借阅记录

主要业务：记录谁在何时借走了什么书，并且有没有归还，归还时间多少

借阅记录：（id，图书id，读者id，借书时间，还书时间，还书状态，备注信息）

<img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220625152516780.png" alt="image-20220625152516780" style="zoom:33%;" />

#### notice 公告

主要业务：管理员在此处发布信息公告，比如什么书上架了，公告谁该还书了等信息通知

公告：（id，公告标题，公告内容，发布人，公告发布时间）

<img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220625152823089.png" alt="image-20220625152823089" style="zoom: 33%;" />

#### reader_info 读者信息

主要业务：读者的电话号码信息籍贯等个人信息

读者：（id，用户名，密码，真实姓名，性别，出生日期，籍贯，电话号码，邮箱地址，注册日期，读者编号）

<img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220625153339459.png" alt="image-20220625153339459" style="zoom: 33%;" />

#### type_info 图书类型表

主要业务：对图书馆的书进行分类与备注

图书类型：（id，图书类型名称，备注）

<img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220625153707566.png" alt="image-20220625153707566" style="zoom:33%;" />

### 整体的 E-R 模型

综合整个图书管理系统的业务关系，画出整体的er图如下所示：



![image-20220625160204245](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220625160204245.png)



### 利用“范式理论”优化关系型数据库ER模型

数据库在物理设备上的存储结构与存取方法被称为数据库的物理结构，它依赖与给定的计算机系统。为一个给定

的逻辑数据模型选取一个最合适应用要求的物理结构。根据上面的实体关系分析以及ER图，设计图书管理系统的

数据库表。

针对“基本 E-R 模型”采用关系数据库范式理论进行分解优化，生成最终的“关系型数据库ER模型”设计方案如下，下面是对于每一个对象的逻辑设计：



#### admin 管理员

admin的id自增，id+username=主键，id为非空，其他属性允许为空，默认值为NULL。

管理员类型有两种，0代表普通管理员，1代表高级管理员，具有最高的权限。

id+username --->password,adminType ,符合BCNF。

<center><strong>表 1  admin 管理员 </strong></center>

| **序号** | **字段**  | **说明**   | **数据类型** | **长度** | **自增** | **主键** | **允许空** | **默认值** |
| -------- | --------- | ---------- | ------------ | -------- | -------- | -------- | ---------- | ---------- |
| 1        | id        | id         | int          |          | √        | √        | ×          | NULL       |
| 2        | username  | 用户名     | varchar      | 20       | ×        | √        | ×          | NULL       |
| 3        | password  | 密码       | varchar      | 20       | ×        | ×        | √          | NULL       |
| 4        | adminType | 管理员类型 | int          |          | ×        | ×        | √          | NULL       |



#### book_info 图书信息

id为自增主键，非空。由于图书类型与图书具有一对多的关系，为type_id设置外键，关联表type_info的主键id，且级联删除，级联更新。

其中status表示图书的状态，0未借出，1已借出 。

所有的非主属性均完全依赖于id，符合BCNF。

<center><strong>表 2  book_info 图书信息 </strong></center>

| **序号** | **字段**     | **说明**               | **数据类型** | **长度** | **自增** | **主键** | **允许空** | **默认值** |
| -------- | ------------ | ---------------------- | ------------ | -------- | -------- | -------- | ---------- | ---------- |
| 1        | id           | id                     | int          |          | √        | √        | ×          | NULL       |
| 2        | name         | 图书名称               | varchar      | 20       | ×        | ×        | √          | NULL       |
| 3        | author       | 作者                   | varchar      | 30       | ×        | ×        | √          | NULL       |
| 4        | publish      | 出版社                 | varchar      | 30       | ×        | ×        | √          | NULL       |
| 5        | isbn         | 书籍编号               | varchar      | 30       | ×        | ×        | √          | NULL       |
| 6        | introduction | 简介                   | varchar      | 50       | ×        | ×        | √          | NULL       |
| 7        | language     | 语言                   | varchar      | 20       | ×        | ×        | √          | NULL       |
| 8        | price        | 价格                   | double       |          | ×        | ×        | √          | NULL       |
| 9        | publish_date | 出版时间               | date         |          | ×        | ×        | √          | NULL       |
| 10       | type_id      | 书籍类型               | int          |          | ×        | ×        | √          | NULL       |
| 11       | status       | 状态：0未借出，1已借出 | int          |          | ×        | ×        | √          | NULL       |



#### lend_list 借阅记录

id为自增主键，boodId设置外键，关联到表book_info的id，readerId设置外键，关联到表reader_info的id。对于每一次的借阅记录，都有借书时间（lendDate）与还书时间（backDate），还书状态（backType）（对于书的磨损程度的描述），以及特殊情况出现的备注。

所有的非主属性均完全依赖于id，符合BCNF。

<center><strong>表 3  lend_list 借阅记录 </strong></center>

| **序号** | **字段**      | **说明** | **数据类型** | **长度** | **自增** | **主键** | **允许空** | **默认值** |
| -------- | ------------- | -------- | ------------ | -------- | -------- | -------- | ---------- | ---------- |
| 1        | id            | id       | int          |          | √        | √        | ×          | NULL       |
| 2        | bookId        | 图书id   | int          |          | ×        | ×        | √          | NULL       |
| 3        | readerId      | 读者id   | int          |          | ×        | ×        | √          | NULL       |
| 4        | lendDate      | 借书时间 | datetime     |          | ×        | ×        | √          | NULL       |
| 5        | backDate      | 还书时间 | datetime     |          | ×        | ×        | √          | NULL       |
| 6        | backType      | 还书状态 | int          |          | ×        | ×        | √          | NULL       |
| 7        | exceptRemarks | 备注信息 | varchar      | 255      | ×        | ×        | √          | NULL       |



#### notice 公告

id为自增主键，为author设置外键，关联到admin的主键之一的属性username，为每一次公告都关联一个发布公告的管理员。

所有的非主属性均完全依赖于id，符合BCNF。

<center><strong>表 4  notice 公告 </strong></center>

| **序号** | **字段**   | **说明**     | **数据类型** | **长度** | **自增** | **主键** | **允许空** | **默认值** |
| -------- | ---------- | ------------ | ------------ | -------- | -------- | -------- | ---------- | ---------- |
| 1        | id         | id           | int          |          | √        | √        | ×          | NULL       |
| 2        | topic      | 公告标题     | varchar      | 50       | ×        | ×        | √          | NULL       |
| 3        | content    | 公告内容     | varchar      | 255      | ×        | ×        | √          | NULL       |
| 4        | author     | 发布人       | varchar      | 20       | ×        | ×        | √          | NULL       |
| 5        | createDate | 公告发布时间 | datetime     |          | ×        | ×        | √          | NULL       |



#### reader_info 读者信息

id为自增主键。

所有的非主属性均完全依赖于id，符合BCNF。

<center><strong>表 5  reader_info 读者信息 </strong></center>

| **序号** | **字段**     | **说明** | **数据类型** | **长度** | **自增** | **主键** | **允许空** | **默认值** |
| -------- | ------------ | -------- | ------------ | -------- | -------- | -------- | ---------- | ---------- |
| 1        | id           | id       | int          |          | √        | √        | ×          | NULL       |
| 2        | username     | 用户名   | varchar      | 20       | ×        | ×        | √          | NULL       |
| 3        | password     | 密码     | varchar      | 20       | ×        | ×        | √          | NULL       |
| 4        | realName     | 真实姓名 | varchar      | 20       | ×        | ×        | √          | NULL       |
| 5        | sex          | 性别     | varchar      | 5        | ×        | ×        | √          | NULL       |
| 6        | birthday     | 出生日期 | date         |          | ×        | ×        | √          | NULL       |
| 7        | address      | 籍贯     | varchar      | 30       | ×        | ×        | √          | NULL       |
| 8        | tel          | 电话号码 | varchar      | 11       | ×        | ×        | √          | NULL       |
| 9        | email        | 邮箱地址 | varchar      | 15       | ×        | ×        | √          | NULL       |
| 10       | registerDate | 注册日期 | datetime     |          | ×        | ×        | √          | NULL       |
| 11       | readerNumber | 读者编号 | varchar      | 20       | ×        | ×        | √          | NULL       |

 

#### type_info 图书类型表

id为自增主键。

所有的非主属性均完全依赖于id，符合BCNF。

<center><strong>表 6  type_info 图书类型表 </strong></center>

| **序号** | **字段** | **说明**     | **数据类型** | **长度** | **自增** | **主键** | **允许空** | **默认值** |
| -------- | -------- | ------------ | ------------ | -------- | -------- | -------- | ---------- | ---------- |
| 1        | id       | id           | int          |          | √        | √        | ×          | NULL       |
| 2        | name     | 图书分类名称 | varchar      | 20       | ×        | ×        | √          | NULL       |
| 3        | remarks  | 备注         | char         | 10       | ×        | ×        | √          | NULL       |



### 各实体最终ER形态

对于每一个表都满足BCNF，为每一个表插入数据并进行相应的业务操作。

对于图书管理的对象，属性的具体设置如下：

![image-20220624190036479](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624190036479.png)



#### admin 管理员:

`picture`

<center class="half">
    <img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623212735526.png" alt="校徽" style="width:40%;" />
    <img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623212646352.png" width="300"/>
`mysql`

```sql
-- ----------------------------
-- Table structure for admin
-- ----------------------------
DROP TABLE IF EXISTS `admin`;
CREATE TABLE `admin`  (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'id',
  `username` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户名',
  `password` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '密码',
  `adminType` int NULL DEFAULT NULL COMMENT '管理员类型',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `username`(`username` ASC) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '管理员' ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of admin
-- ----------------------------
INSERT INTO `admin` VALUES (1, 'admin', '12345', 1);
INSERT INTO `admin` VALUES (2, 'zyz', '12345', 0);
INSERT INTO `admin` VALUES (4, 'stc', '12345', 0);


```

#### book_info 图书信息：

`picture`

<center class="half">
    <img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623213706000.png" alt="校徽" style="width:40%;" />



`mysql`


```sql
-- ----------------------------
-- Table structure for book_info
-- ----------------------------
DROP TABLE IF EXISTS `book_info`;
CREATE TABLE `book_info`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '图书名称',
  `author` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '作者',
  `publish` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '出版社',
  `isbn` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '书籍编号',
  `introduction` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '简介',
  `language` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '语言',
  `price` double NULL DEFAULT NULL COMMENT '价格',
  `publish_date` date NULL DEFAULT NULL COMMENT '出版时间',
  `type_id` int(11) NULL DEFAULT NULL COMMENT '书籍类型',
  `status` int(11) NULL DEFAULT NULL COMMENT '状态：0未借出，1已借出',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 7 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '图书信息' ROW_FORMAT = Dynamic;
```

`picture`

![image-20220623214452077](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623214452077.png)

`mysql`

```sql
-- ----------------------------
-- Records of book_info
-- ----------------------------
INSERT INTO `book_info` VALUES (1, '算法导论', '托马斯·科尔曼', '麻省理工学院出版社', '100011', '关于计算机中数据结构与算法的图书', '英文', 142, '2009-07-01', 7, 0);
INSERT INTO `book_info` VALUES (2, '三国演义', '罗贯中', '清华大学出版社', '100012', '东汉末年分三国。。。', '中文', 48, '2018-03-30', 1, 1);
INSERT INTO `book_info` VALUES (3, '中华上下五千年', '程帆', '中国戏剧出版社', '100013', '我们伟大的祖国有非常悠久的历史。', '中文', 39, '2019-04-04', 2, 1);
INSERT INTO `book_info` VALUES (4, '资本论', '马克思', '原子能出版社', '100014', '马克思的剩余价值理论', '英文', 42, '2019-04-05', 5, 0);
INSERT INTO `book_info` VALUES (5, '经济学原理', '马歇尔', '机械工业出版社', '100015', '西方经济学界公认为划时代的著作', '英文', 45, '2020-04-06', 5, 0);
INSERT INTO `book_info` VALUES (6, '大变局下的中国法治', '李卫东', '北京大学出版社', '100016', '十大经典法学著作', '中文', 42, '2015-04-05', 4, 1);
INSERT INTO `book_info` VALUES (7, '如何创建图书管理系统', '张怡桢', '南开大学', '101011', '数据库与java的应用之图书管理系统', '中文', 0, '2022-06-03', 7, 0);

```

#### lend_list 借阅记录：

`picture`

<center class="half">
    <img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623220157698.png" alt="校徽" style="width:40%;" />

`mysql`

```sql
-- ----------------------------
-- Table structure for lend_list
-- ----------------------------
DROP TABLE IF EXISTS `lend_list`;
CREATE TABLE `lend_list`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `bookId` int(11) NULL DEFAULT NULL COMMENT '图书id',
  `readerId` int(11) NULL DEFAULT NULL COMMENT '读者id',
  `lendDate` datetime(0) NULL DEFAULT NULL COMMENT '借书时间',
  `backDate` datetime(0) NULL DEFAULT NULL COMMENT '还书时间',
  `backType` int(11) NULL DEFAULT NULL,
  `exceptRemarks` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注信息',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 40 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '借阅记录（谁在何时借走了什么书，并且有没有归还，归还时间多少）' ROW_FORMAT = Dynamic;

```

`picture`

![image-20220623220223986](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623220223986.png)

`mysql`

```sql
-- ----------------------------
-- Records of lend_list
-- ----------------------------
INSERT INTO `lend_list` VALUES (15, 1, 1, '2022-07-04 10:07:31', '2022-07-04 21:09:27', 0, NULL);
INSERT INTO `lend_list` VALUES (36, 2, 2, '2022-07-04 21:48:17', '2022-07-04 21:50:00', 2, NULL);
INSERT INTO `lend_list` VALUES (37, 3, 3, '2022-07-04 21:50:22', '2022-07-04 21:50:32', 3, NULL);
INSERT INTO `lend_list` VALUES (38, 5, 1, '2022-07-05 21:35:35', '2022-07-05 21:35:47', 1, NULL);
INSERT INTO `lend_list` VALUES (39, 6, 3, '2022-07-05 21:42:35', NULL, NULL, NULL);

```

#### notice 公告：

`picture`

<center class="half">
    <img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623220909247.png" alt="校徽" style="width:40%;" />

`mysql`

```sql
-- ----------------------------
-- Table structure for notice
-- ----------------------------
DROP TABLE IF EXISTS `notice`;
CREATE TABLE `notice`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `topic` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `content` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '公告内容',
  `author` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '发布人',
  `createDate` datetime(0) NULL DEFAULT NULL COMMENT '公告发布时间',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 7 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '公告' ROW_FORMAT = Dynamic;

```

`picture`

![image-20220623220223986](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623221058078.png)

`mysql`

```sql
-- ----------------------------
-- Records of notice
-- ----------------------------
INSERT INTO `notice` VALUES (7, '数据库大作业之图书管理系统', '使用java与mysql结合生成图书管理系统的数据库java应用！', 'admin', '2022-06-21 20:41:38');
INSERT INTO `notice` VALUES (8, '2013747张怡桢的作业', '南开大学软件学院2013747张怡桢的作业', 'admin', '2022-06-21 20:42:29');
INSERT INTO `notice` VALUES (9, '使用普通管理员账号进行公告编写测试', '如题', 'admin', '2022-06-21 20:46:55');


```

#### reader_info 读者信息：

`picture`

<center class="half">
    <img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623221458072.png" alt="校徽" style="width:40%;" />

`mysql`

```sql
-- ----------------------------
-- Table structure for reader_info
-- ----------------------------
DROP TABLE IF EXISTS `reader_info`;
CREATE TABLE `reader_info`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `username` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户名',
  `password` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '密码',
  `realName` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '真实姓名',
  `sex` varchar(5) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '性别',
  `birthday` date NULL DEFAULT NULL COMMENT '出生日期',
  `address` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '籍贯',
  `tel` varchar(11) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '电话',
  `email` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '邮箱',
  `registerDate` datetime(0) NULL DEFAULT NULL COMMENT '注册日期',
  `readerNumber` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '读者编号',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 4 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '读者信息（包括登录账号密码等）' ROW_FORMAT = Dynamic;


```

`picture`

![image-20220623221655283](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623221655283.png)

`mysql`

```sql
-- ----------------------------
-- Records of reader_info
-- ----------------------------
INSERT INTO `reader_info` VALUES (1, 'zhangsan', '12345', '张三', '男', '2001-04-01', '江西南昌', '13767134834', 'yu123@163.com', '2021-04-02 13:18:59', '8120116041');
INSERT INTO `reader_info` VALUES (2, 'mary', '12345', '李四', '女', '2004-04-01', '湖北武汉', '15270839599', 'yx123@163.com', '2021-03-06 07:57:56', '8120116044');
INSERT INTO `reader_info` VALUES (3, 'cindy', '12345', '王五', '女', '2010-04-04', '北京海淀', '13834141133', 'zs1314@163.com', '2021-04-04 13:36:42', '8120116042');



```

#### type_info 图书类型表：

`picture`

<center class="half">
    <img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623221923070.png" alt="校徽" style="width:50%;" />
    <img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220623221831471.png" width="300"/>
</center>

`mysql`

```sql
-- ----------------------------
-- Table structure for type_info
-- ----------------------------
DROP TABLE IF EXISTS `type_info`;
CREATE TABLE `type_info`  (
  `id` int(11) NOT NULL AUTO_INCREMENT COMMENT 'id',
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '图书分类名称',
  `remarks` char(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 7 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '图书类型表' ROW_FORMAT = Dynamic;

-- ----------------------------
-- Records of type_info
-- ----------------------------
INSERT INTO `type_info` VALUES (1, '文学类', '陶冶情操');
INSERT INTO `type_info` VALUES (2, '历史类', '了解历史文化');
INSERT INTO `type_info` VALUES (3, '工学类', '造火箭');
INSERT INTO `type_info` VALUES (4, '法学类', '学习法律，打官司');
INSERT INTO `type_info` VALUES (5, '经济学类', '搞经济');
INSERT INTO `type_info` VALUES (6, '统计学类', '学习统计，天下无敌');
INSERT INTO `type_info` VALUES (7, '计算机类', '越秃越聪明');


```

### 优化的“关系数据库 E-R 模型”以及全部 SQL DDL 语句

`picture`

![image-20220624151847182](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624151847182.png)

<center><strong>图 1  关系数据库 E-R 模型 </strong></center>

`mysql`

```sql
CREATE TABLE `admin`  (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'id',
  `username` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户名',
  `password` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '密码',
  `adminType` int NULL DEFAULT NULL COMMENT '管理员类型',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `username`(`username` ASC) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 5 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '管理员' ROW_FORMAT = DYNAMIC;

CREATE TABLE `book_info`  (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'id',
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '图书名称',
  `author` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '作者',
  `publish` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '出版社',
  `isbn` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '书籍编号',
  `introduction` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '简介',
  `language` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '语言',
  `price` double NULL DEFAULT NULL COMMENT '价格',
  `publish_date` date NULL DEFAULT NULL COMMENT '出版时间',
  `type_id` int NULL DEFAULT NULL COMMENT '书籍类型',
  `status` int NULL DEFAULT NULL COMMENT '状态：0未借出，1已借出',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `book_type`(`type_id` ASC) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 8 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '图书信息' ROW_FORMAT = DYNAMIC;

CREATE TABLE `lend_list`  (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'id',
  `bookId` int NULL DEFAULT NULL COMMENT '图书id',
  `readerId` int NULL DEFAULT NULL COMMENT '读者id',
  `lendDate` datetime NULL DEFAULT NULL COMMENT '借书时间',
  `backDate` datetime NULL DEFAULT NULL COMMENT '还书时间',
  `backType` int NULL DEFAULT NULL,
  `exceptRemarks` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注信息',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `bookid`(`bookId` ASC) USING BTREE,
  INDEX `readerid`(`readerId` ASC) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 40 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '借阅记录（谁在何时借走了什么书，并且有没有归还，归还时间多少）' ROW_FORMAT = DYNAMIC;

CREATE TABLE `notice`  (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'id',
  `topic` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `content` varchar(255) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '公告内容',
  `author` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '发布人',
  `createDate` datetime NULL DEFAULT NULL COMMENT '公告发布时间',
  PRIMARY KEY (`id`) USING BTREE,
  INDEX `adminname`(`author` ASC) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 10 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '公告' ROW_FORMAT = DYNAMIC;

CREATE TABLE `reader_info`  (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'id',
  `username` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '用户名',
  `password` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '密码',
  `realName` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '真实姓名',
  `sex` varchar(5) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '性别',
  `birthday` date NULL DEFAULT NULL COMMENT '出生日期',
  `address` varchar(30) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '籍贯',
  `tel` varchar(11) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '电话',
  `email` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '邮箱',
  `registerDate` datetime NULL DEFAULT NULL COMMENT '注册日期',
  `readerNumber` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '读者编号',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 4 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '读者信息（包括登录账号密码等）' ROW_FORMAT = DYNAMIC;

CREATE TABLE `type_info`  (
  `id` int NOT NULL AUTO_INCREMENT COMMENT 'id',
  `name` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '图书分类名称',
  `remarks` char(10) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL COMMENT '备注',
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 8 CHARACTER SET = utf8 COLLATE = utf8_general_ci COMMENT = '图书类型表' ROW_FORMAT = DYNAMIC;

ALTER TABLE `book_info` ADD CONSTRAINT `book_type` FOREIGN KEY (`type_id`) REFERENCES `type_info` (`id`) ON DELETE CASCADE ON UPDATE CASCADE;
ALTER TABLE `lend_list` ADD CONSTRAINT `bookid` FOREIGN KEY (`bookId`) REFERENCES `book_info` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `lend_list` ADD CONSTRAINT `readerid` FOREIGN KEY (`readerId`) REFERENCES `reader_info` (`id`) ON DELETE RESTRICT ON UPDATE RESTRICT;
ALTER TABLE `notice` ADD CONSTRAINT `adminname` FOREIGN KEY (`author`) REFERENCES `admin` (`username`) ON DELETE RESTRICT ON UPDATE SET NULL;


```



## 业务实现

对于表与表之间的关系，我们需要用业务来实现需求，对于基本的业务实现，以及实现途径分析如下：

由**图一**可以分析出，admin管理员可以发布notice公告，lend_list借阅记录记载了读者reader_info与book_info的关系，同时book_info与type_info也有对应的关系。

### 使用视图的业务

**例：**对于读者来说，读者仅能看到自己的借阅记录：

**方法：**创建一个视图，创建时用 *user()* 函数获取当前登录的用户名，然后从 *表* 中查找该用户名，把查找到的该用户的信息放入视图中；给每个用户授予对视图的select权限。

```sql
CREATE ALGORITHM = UNDEFINED SQL SECURITY INVOKER VIEW `view_1` AS CREATE VIEW `reader_lendlist` AS SELECT
* 
FROM
	`lend_list` 
WHERE
	concat(姓名, '@localhost' ) = USER (); WITH LOCAL CHECK OPTION;

```

在业务实现中，通过web前端以及java ssm框架的链接之后，效果如下：

![image-20220624162133527](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624162133527.png)



### 使用触发器的业务

**例：**图书入库时，对于图书进行类别的选择，同时，类别统计中对于该类别书的总数会相应的去增加，同时书的总数也会增加。

**方法：**使用触发器，在图书入库后更新对应的图书种类数量，以及书的总数。

```sql
CREATE DEFINER='root'@'localhost'TRIGGER book_info_AFTER_INSERT AFTER INSERT ON book_info FOR EACH ROW BEGIN #更新对应书籍种类库存数量
UPDATE
book_info
SET
count count NEW.count
WHERE
id NEW.type_info_id; #更新所属种类的数量
UPDATE
type_info
SET
total total NEW.total
WHERE
id=NEW.type_info_id;
ENDS

在业务实现中，通过web前端以及java ssm框架的链接之后，效果如下：
```

![image-20220624163844440](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624163844440.png)



### 使用存储函数、存储过程的业务

**例：**借书还书的过程需要储存函数来完成相应的业务，并且需要记录还书时间等信息。

**方法：**使用储存函数进行参数的穿入，对参数需要设置默认初始值，使得还书或者借书可以正常完成相应的业务。

```sql
CREATE DEFINER=root localhost PROCEDURE rebook (in book_id)
BEGIN
UPDATE
book_info
SET
status=0
WHERE
id=book_id;
END$$

```

在业务实现中，通过web前端以及java ssm框架的链接之后，效果如下：

![image-20220624164359745](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624164359745.png)



### 需要事务处理的业务

本项目中在读者借书时会发生图书状态的变化，需要用到MySQL的事务处理来保证一组结果的正确性。使用BEGIN、ROLLBACK、COMMIT来实现事物处理，从开始，到回滚，最终确认提交。以插入为例，在插入图书时同时更新图书数量以及图书种类，如果出错则进行回滚。



### 需要统计分析的业务

**例：**在业务中，通过数据库层面的图书类别的统计，在java前端的进行模型的展示。

实现如下的应用效果：

![image-20220624163240795](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624163240795.png)

![image-20220624174845671](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624174845671.png)



### 使用java的业务实现

基本的业务功能框架如下，实现管理系统更加齐全的业务，使用jdbc控制数据库。

![image-20220624193559961](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624193559961.png)



## 高级要求

技术栈：

```
- 数据库：MySQL
- 开发工具：IDEA
- 数据连接池：Druid
- Web容器：Apache Tomcat
- 项目管理工具：Maven
- 版本控制工具：Git
- 后端技术：Spring + SpringMVC + MyBatis（SSM）
- 前端框架：LayUI
```

**数据库连接池设置：**

```java
jdbc.driver = com.mysql.cj.jdbc.Driver
jdbc.url = jdbc:mysql://localhost:3306/library?autoReconnect=true&useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
jdbc.username = root
jdbc.password = zyz010203
```

### 系统设计原则

在进行系统软件的设计中，要遵循一些原则和规范，这样才能规范设计流程，便于进行开发。本系统遵循着以下设计原则：

(1)良好的适用性。

开发系统的目的是为用户服务的。也就是说我们所设计的软件需要满足用户的需求。因此本文的设计遵循的是用户需求优先的原则。

(2)结构稳定性。

开发设计进行之前，需要设计系统的整体结构。一旦确定了体系的结构，这些设计便能流程化的进行。因此，维持一个稳定的结构才能保证后续一系列的工作的进行。

(3)可扩展性。

衡量一个系统的好坏需要评估这个系统的可扩展性。如果软件只能实现现有的功能，对其他功能的添加有封闭性，当用户提出新的需求，只能重新设计，这显然是不合理的。因为良好的可扩展性无论对用户还是开发人员而言都是有益的。

（4）复用性。

在一个系统中，有很多的模块内容是比较成熟，因此很多类似的工作就可以通过复用来实现，这样不仅提高了效率，而且可靠性也大大提高。

（5）易维护性。

系统的维护往往是最耗费精力和金钱的。因此设计出易维护的系统能够使维护人员能够快速查找出问题，能让系统具备自维护的特点是很有必要的。



### 管理员角度的业务系统

使用java开发web前端，从github上找到适合的前端框架LayUI来进行操作界面的开发，并实现图书管理系统应用的需求。

```
1、后台首页index
2、图书信息管理 
3、读者管理 
4、公告管理
5、管理员管理
6、借阅管理
7、统计分析
8、登录
9、退出登录和修改密码

```

#### 登陆界面

打开登录界面，背景是南开大学津南校区图书馆的图片，页面中写着项目名称。

![image-20220624173209772](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624173209772.png)

细节：在登录界面时可以选择用户类型，以管理员或者读者的身份进入图书管理系统，同时，我学习了登录页面随机生成验证码的功能。

　　<table style="border:none;text-align:center;width:auto;margin: 0 auto;">
	<tbody>
		<tr>
			<td style="padding: 6px"><img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624173959522.png" ></td><td><img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624174741638.png" ></td>
		</tr>
        <tr><td><strong>图   用户登录身份选择</strong></td><td><strong>图   验证码随机生成</strong></td></tr>
	</tbody>
</table>

相应的配置文件目录：

![image-20220624175053496](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175053496.png)



#### 进入系统

进入系统中可以看到，我发布的系统公告测试在首页上，可以点击公告查看详细的公告信息。

![image-20220624175153586](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175153586.png)

细节：

　　<table style="border:none;text-align:center;width:auto;margin: 0 auto;">
	<tbody>
		<tr>
			<td style="padding: 6px"><img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175238770.png" ></td><td><img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175316474.png" ></td>
		</tr>
        <tr><td><strong>图   南开logo细节</strong></td><td><strong>图   公告展示</strong></td></tr>
	</tbody>
</table>



#### 借阅功能

图书馆管理系统中最重要的就是lend_list这个对象，以下功能实现了lend_list最重要的功能，借书与还书。

借书与还书的权限在管理员手上，因为需要读者将图书归还，管理员对图书进行状态的检查才能将图书入库。

以下是借阅功能的方法接口：

```java
public interface LendListService {

    //分页查询
    PageInfo<LendList> queryLendListAll(LendList lendList, int page, int limit);
    //添加借阅记录
    void addLendListSubmit(LendList lendList)；
    // 删除
    void deleteLendListById(List<String> ids, List<String> bookIds);
  	//还书
    void updateLendListSubmit(List<String> ids, List<String> bookIds);
  	//异常还书
    void backBook(LendList lendList);
    //时间线查询
    List<LendList> queryLookBookList(Integer rid, Integer bid);
}

```

##### 借书功能

选择相应的书籍并输入借书卡来借阅。

![image-20220624175454065](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175454065.png)

##### 还书功能

选择相应的书籍并点击还书可以将书入库。

![image-20220624175548131](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175548131.png)



#### 图书管理

图书可以新购置进行入库，需要输入图书的各个属性来进行标识，展示红点的属性，被限制为不可为空值，在传入时会进行空值检验。

以下是图书管理功能的方法接口：

```java
public interface BookInfoService {

    //查询所有记录
    PageInfo<BookInfo> queryBookInfoAll(BookInfo bookInfo,Integer pageNum,Integer limit);
		//添加图书记录
    void addBookSubmit(BookInfo bookInfo);
   	//修改 根据id查询记录信息
    BookInfo queryBookInfoById(Integer id);
		//修改提交
    void updateBookSubmit(BookInfo info);
		//根据ids删除记录信息
    void deleteBookByIds(List<String> ids);
		//根据类型获取图书数量
    List<BookInfo> getBookCountByType();
}

```

##### 增加图书

![image-20220624175633416](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175633416.png)

##### 删除图书

删除图书操作如下所示：

![image-20220624175704211](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175704211.png)



#### 读者管理

对于读者管理功能则可以添加图书馆的读者与删除图书馆的读者

以下是读者管理功能的方法接口：

```java
public interface ReaderInfoService {

    //查询所有记录
    PageInfo<ReaderInfo> queryAllReaderInfo(ReaderInfo readerInfo,Integer pageNum,Integer limit);
		//添加
    void addReaderInfoSubmit(ReaderInfo readerInfo);
		//查询（修改前先查询）
    ReaderInfo queryReaderInfoById(Integer id);
		//修改提交
    void updateReaderInfoSubmit(ReaderInfo readerInfo);
		//删除
    void deleteReaderInfoByIds(List<String> ids);
		//根据用户名和密码查询用户信息
    ReaderInfo queryUserInfoByNameAndPassword(String username,String password);
}

```

##### 增加读者

读者信息显示红点项目为必填项目，在web端进行传入时会检测。

![image-20220624175743596](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175743596.png)

##### 删除读者

删除读者功能展示如下：

![image-20220624175824611](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175824611.png)



#### 类型管理

图书馆的图书类型是给书籍归类归置的必不可缺的标识，可以将书籍分成自己能够识别的类别，并且需要在入库时对每本书的类别进行标识。

以下是图书类型管理功能的方法接口：

```java
public interface TypeInfoService {
    //查询所有记录
    PageInfo<TypeInfo> queryTypeInfoAll(String name, Integer pageNum, Integer limit);
		//添加图书类型
    void addTypeSubmit(TypeInfo info);
		//修改 根据id查询记录信息
    TypeInfo queryTypeInfoById(Integer id);
		//修改提交
    void updateTypeSubmit(TypeInfo info);
		//根据ids删除记录信息
    void deleteTypeByIds(List<String> id);
}

```

##### 增加类型

![image-20220624175857397](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175857397.png)

##### 删除类型

删除类型功能展示如下：

![image-20220624175921765](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175921765.png)



#### 公告管理

公告是图书管理员通知读者信息的窗口，在读者的页面会展示，在管理者的页面中可以进行控制。

以下是公告管理功能的方法接口：

```java
public interface NoticeService {

		//查询所有公告
    PageInfo<Notice> queryAllNotice(Notice notice,Integer pageNum,Integer limit);
		//发布公告（添加公告）
    void addNotice(Notice notice);
		//查询公告详情     这里设置公告不能随便改，不然每个人看的都不一样了，
     //要改必须删除原来的，自己重新再发布一个
    Notice queryNoticeById(Integer id);
		//删除
    void deleteNoticeByIds(List<String> ids);
}

```

##### 查看公告

可以查看公告的具体信息

![image-20220624175946570](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624175946570.png)

##### 发布公告

管理员具有编辑公告的权限

![image-20220624180034083](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624180034083.png)



#### 管理员管理

高级管理员可以新增管理员，对每一个管理员进行控制。

以下是管理员管理功能的方法接口：

```java
public interface AdminService {

		//查询所有管理员（分页）
    PageInfo<Admin> queryAdminAll(Admin admin,Integer pageNum,Integer limit);
		//添加提交
    void addAdminSubmit(Admin admin);
		//根据id查询（修改）
    Admin queryAdminById(Integer id);
		//修改提交
    void updateAdminSubmit(Admin admin);
		//删除
    void deleteAdminByIds(List<String> ids);
		//根据用户名和密码查询用户信息
    Admin queryUserByNameAndPassword(String username,String password);
}
```



##### 管理员显示

管理员的信息如下

![image-20220624180129057](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624180129057.png)

##### 增删管理员

高级管理员具有增加删除管理员的功能

　　<table style="border:none;text-align:center;width:auto;margin: 0 auto;">
	<tbody>
		<tr>
			<td style="padding: 6px"><img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624180219805.png" ></td><td><img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624180237103.png" ></td>
		</tr>
        <tr><td><strong>图   增加</strong></td><td><strong>图   删除</strong></td></tr>
	</tbody>
</table>



### 读者角度业务系统

读者仅对公告具有阅读查看权利，并且仅能查询自己的借阅记录



#### 公告查看

读者仅可以查看公告的详细信息，对公告不具有编辑的权限。

![image-20220624180649442](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624180649442.png)



#### 借阅信息查看

每一个读者仅可以查看自己的借阅信息。

![image-20220624180728651](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624180728651.png)



### 更完整的业务功能



#### 密码修改与退出登录

　<table style="border:none;text-align:center;width:auto;margin: 0 auto;">
	<tbody>
		<tr>
			<td style="padding: 6px"><img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624180923014.png" ></td><td><img src="https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624180951715.png" ></td>
		</tr>
        <tr><td><strong>图   修改密码</strong></td><td><strong>图   退出登录</strong></td></tr>
	</tbody>
</table>



#### 页面栏与页面功能

![image-20220624181144689](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624181144689.png)

左边的框对应着打开各种功能页，右边的红框中功能依次为刷新，删除缓存，放大页面等功能。



### 针对性能、安全等非功能需求的进一步思考

在应用设计中设计到数据安全的问题



#### 在创建视图或者是存储过程的时候

在创建视图或者是存储过程的时候是需要定义安全验证方式的(也就是安全性SQL SECURITY)，其值可以为definer或invoker，表示在执行过程中，使用谁的权限来执行。

definer: 由definer(定义者)指定的用户的权限来执行

invoker: 由调用这个视图(存储过程)的用户的权限来执行

![image-20220624161655508](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624161655508.png)



#### 在实现业务系统的时候

使用java与mysql完成的基于SSM+Layui的图书管理系统，需要了解学习java的各种框架与技术栈，使用框架技术，让开发更加完整与快速。

![image-20220624182945852](https://zyzstc-1303973796.cos.ap-beijing.myqcloud.com/uPic/image-20220624182945852.png)



## 结语

本次的数据库大作业，完整的实现了一个图书管理以及借阅的系统的业务需求，使用的数据库管理工具为navicat，使用的java开发软件为IntelliJ IDEA，使用的web端服务容器为Tomcat，完整地实现了对于图书管理系统的设计。

**对于范式理论的条件满足，以及业务系统需求的构思，是完成设计一个业务的重中之重**，只有设计好了业务系统的关系型数据库，才可以在后面的实现中，完整地完成业务功能的设计。

同时，使用jdbc可以拓展数据库的业务功能，在该应用的实现中这一点展现得很到位。

在设计系统的过程中，具体功能的实现要做到灵活，具备可扩展性。在设计的初期，许多设想都是不够合理的，必须得经过一次次的修改，这就需要初始框架具备可拓展性。在功能实现方面，要结合实际的情况，不要过分拘泥于单一的模式，要做到灵活、方便和快捷。

整个设计对我影响最深刻的一点就是要善于发现问题，善于提出问题。我们在上课的时候，更多地接触的是理论性的知识，在实际的设计中，我们对于一个项目，要不断在其中寻找问题，并去解决它，只有这样，才可以把它设计的更加的完美，更好的适应市场的需要。

对于该应用的不足之处，在于该应用未能在云服务器部署并进行相应的应用，对于这一点我充满期待，希望能够在精湛技术的过程中，学会部署网站的能力。 

